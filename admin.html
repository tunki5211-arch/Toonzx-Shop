<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ADMIN PANEL</title>

<style>
body{
  margin:0;
  font-family:Consolas;
  background:#020216;
  color:#00ffff;
}
h1,h2,h3{text-align:center}
.container{padding:20px}
.card{
  border:1px solid #00ffff;
  padding:10px;
  margin:10px 0;
}
button{
  padding:8px;
  margin-top:5px;
  width:100%;
  background:#00ffff;
  border:none;
  font-weight:bold;
}
hr{border:1px solid #00ffff}
.summary{
  border:2px solid #ff00ff;
  padding:15px;
  box-shadow:0 0 15px #ff00ff;
}
</style>
</head>

<body>

<h1>ğŸ” ADMIN ORDER</h1>

<div class="container">

  <h3>â³ à¸£à¸­à¸•à¸£à¸§à¸ˆ</h3>
  <div id="pending"></div>

  <h3>âœ… à¸ªà¸³à¹€à¸£à¹‡à¸ˆ</h3>
  <div id="done"></div>

  <hr>

  <h3>ğŸ“Š à¸ªà¸£à¸¸à¸›à¸¢à¸­à¸”à¸‚à¸²à¸¢</h3>
  <div id="summary" class="summary"></div>

</div>

<script>
/* à¹‚à¸«à¸¥à¸”à¸­à¸­à¹€à¸”à¸­à¸£à¹Œà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” */
function loadOrders(){
  const pendingDiv = document.getElementById("pending");
  const doneDiv = document.getElementById("done");

  pendingDiv.innerHTML = "";
  doneDiv.innerHTML = "";

  const orders = JSON.parse(localStorage.getItem("orders")) || [];

  orders.forEach((o,i)=>{
    const html = `
      <div class="card">
        ğŸ‘¤ à¸¥à¸¹à¸à¸„à¹‰à¸²: <b>${o.name || "-"}</b><br>
        ğŸ§¾ à¸ªà¸´à¸™à¸„à¹‰à¸²: ${o.items?.map(x=>x.name).join(", ") || "-"}<br>
        ğŸ’° à¸£à¸§à¸¡: <b>${o.total || 0}</b> à¸šà¸²à¸—<br>
        <button onclick="markDone(${i})">âœ… à¸ªà¸³à¹€à¸£à¹‡à¸ˆ</button>
        <button onclick="delOrder(${i})">ğŸ—‘ï¸ à¸¥à¸š</button>
      </div>
    `;

    if(o.status === "done"){
      doneDiv.innerHTML += html;
    }else{
      pendingDiv.innerHTML += html;
    }
  });

  calcSummary();
}

/* à¸à¸”à¸ªà¸³à¹€à¸£à¹‡à¸ˆ */
function markDone(i){
  const orders = JSON.parse(localStorage.getItem("orders")) || [];
  orders[i].status = "done";
  localStorage.setItem("orders", JSON.stringify(orders));
  loadOrders();
}

/* à¸¥à¸šà¸­à¸­à¹€à¸”à¸­à¸£à¹Œ */
function delOrder(i){
  if(!confirm("à¸¥à¸šà¸­à¸­à¹€à¸”à¸­à¸£à¹Œà¸™à¸µà¹‰?")) return;
  const orders = JSON.parse(localStorage.getItem("orders")) || [];
  orders.splice(i,1);
  localStorage.setItem("orders", JSON.stringify(orders));
  loadOrders();
}

/* à¸ªà¸£à¸¸à¸›à¸¢à¸­à¸”à¸‚à¸²à¸¢ */
function calcSummary(){
  const orders = JSON.parse(localStorage.getItem("orders")) || [];
  let total = 0;
  let count = 0;

  orders.forEach(o=>{
    if(o.status === "done"){
      total += Number(o.total || 0);
      count++;
    }
  });

  document.getElementById("summary").innerHTML = `
    ğŸ§¾ à¸­à¸­à¹€à¸”à¸­à¸£à¹Œà¸ªà¸³à¹€à¸£à¹‡à¸ˆ: <b>${count}</b> à¸£à¸²à¸¢à¸à¸²à¸£<br>
    ğŸ’¸ à¸¢à¸­à¸”à¸‚à¸²à¸¢à¸£à¸§à¸¡: <b>${total}</b> à¸šà¸²à¸—
  `;
}

/* à¹‚à¸«à¸¥à¸”à¸—à¸±à¸™à¸—à¸µ */
loadOrders();
</script>

</body>
</html>
