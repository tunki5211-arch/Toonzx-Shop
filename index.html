<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ROBLOX SHOP</title>

<style>
body{
  margin:0;
  font-family:Consolas, monospace;
  background:#020216;
  color:#00ffff;
}
header{
  padding:20px;
  text-align:center;
  box-shadow:0 0 15px #00ffff;
}
.container{
  padding:20px;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
  gap:15px;
}
.card{
  background:#05052a;
  border:1px solid #00ffff;
  padding:15px;
  text-align:center;
}
button{
  margin-top:10px;
  width:100%;
  padding:10px;
  background:#00ffff;
  border:none;
  font-weight:bold;
  cursor:pointer;
}
.qr{
  margin:30px auto;
  max-width:280px;
  text-align:center;
  border:2px solid #00ffff;
  padding:20px;
}
input{
  width:100%;
  padding:10px;
  margin-top:10px;
}
.hidden{display:none;}
.admin{
  padding:20px;
  border-top:2px solid #00ffff;
}
.notice{
  color:#ff00ff;
  font-weight:bold;
  margin:10px 0;
}
</style>
</head>

<body>

<header>
  <h1>üß± ROBLOX ITEM SHOP</h1>
</header>

<!-- ‡∏£‡πâ‡∏≤‡∏ô -->
<div class="container" id="shop"></div>

<!-- ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô -->
<div class="qr">
  <h3>üí∏ PromptPay</h3>
  <img src="qr.png" style="width:100%">
  <p id="pp">0123456789</p>
  <button onclick="copyPP()">‡∏Å‡πä‡∏≠‡∏õ‡πÄ‡∏•‡∏Ç PromptPay</button>

  <input id="user" placeholder="Username Roblox">
  <input type="file" id="slip">
  <button onclick="checkout()">‡πÇ‡∏≠‡∏ô‡πÅ‡∏•‡πâ‡∏ß</button>
</div>

<!-- ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì -->
<div class="qr hidden" id="thanks">
  <h3>‚úÖ ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h3>
  <p>‡∏£‡∏´‡∏±‡∏™‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</p>
  <h2 id="orderId"></h2>
  <button onclick="downloadPDF()">üßæ ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à PDF</button>
</div>

<!-- ‡πÄ‡∏ä‡πá‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ -->
<div class="qr">
  <input id="checkId" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå">
  <button onclick="checkOrder()">‡πÄ‡∏ä‡πá‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</button>
  <p id="status"></p>
</div>

<!-- ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô -->
<div class="admin">
  <h2>üîê Admin</h2>
  <input id="adminPass" placeholder="‡∏£‡∏´‡∏±‡∏™‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô">
  <button onclick="login()">‡πÄ‡∏Ç‡πâ‡∏≤‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô</button>

  <div id="panel" class="hidden">
    <p id="notify" class="notice"></p>
    <h3>üì¶ ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</h3>
    <div id="orders"></div>
    <h3>üí∞ ‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏£‡∏ß‡∏°: <span id="sum">0</span> ‡∏ö‡∏≤‡∏ó</h3>
    <canvas id="chart"></canvas>
  </div>
</div>

<audio id="notifySound">
  <source src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg">
</audio>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
const ADMIN_PASSWORD="1234";

const products=[
 {name:"Robux 400",price:150,hot:true},
 {name:"VIP Server",price:99,hot:false}
];

let orders=JSON.parse(localStorage.orders||"[]");

/* ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ */
shop.innerHTML=products.map(p=>`
<div class="card">
  <h3>${p.hot?"‚≠ê ":""}${p.name}</h3>
  <p>${p.price} ‡∏ö‡∏≤‡∏ó</p>
</div>`).join("");

function copyPP(){
  navigator.clipboard.writeText(pp.innerText);
  alert("‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç PromptPay ‡πÅ‡∏•‡πâ‡∏ß");
}

function checkout(){
  if(!user.value){
    alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å Username");
    return;
  }
  const id="RBX"+Date.now();
  const total=products.reduce((s,p)=>s+p.price,0);

  orders.push({
    id,
    user:user.value,
    total,
    status:"‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à"
  });

  localStorage.orders=JSON.stringify(orders);
  localStorage.newOrder="‡∏°‡∏µ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà "+id;

  orderId.innerText=id;
  thanks.classList.remove("hidden");
}

function checkOrder(){
  const o=orders.find(x=>x.id===checkId.value);
  status.innerText=o?("‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: "+o.status):"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå";
}

/* ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô */
function login(){
  if(adminPass.value===ADMIN_PASSWORD){
    panel.classList.remove("hidden");
    renderAdmin();
  }else{
    alert("‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
  }
}

function renderAdmin(){
  ordersDiv.innerHTML=orders.map(o=>`
    <p>
      ${o.id} | ${o.user} | ${o.status} | ${o.total}‡∏ø
      <button onclick="setStatus('${o.id}')">‚úî</button>
      <button onclick="delOrder('${o.id}')">üóëÔ∏è</button>
    </p>
  `).join("");

  sum.innerText=orders.reduce((s,o)=>s+o.total,0);

  if(localStorage.newOrder){
    notify.innerText="üîî "+localStorage.newOrder;
    notifySound.play();
    localStorage.removeItem("newOrder");
  }

  new Chart(chart,{
    type:"bar",
    data:{
      labels:orders.map(o=>o.id),
      datasets:[{
        label:"‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢",
        data:orders.map(o=>o.total)
      }]
    }
  });
}

function setStatus(id){
  orders.find(o=>o.id===id).status="‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à";
  localStorage.orders=JSON.stringify(orders);
  renderAdmin();
}

function delOrder(id){
  orders=orders.filter(o=>o.id!==id);
  localStorage.orders=JSON.stringify(orders);
  renderAdmin();
}

/* PDF */
function downloadPDF(){
  const { jsPDF } = window.jspdf;
  const pdf = new jsPDF();
  pdf.setFontSize(16);
  pdf.text("ROBLOX ITEM SHOP",20,20);
  pdf.setFontSize(12);
  pdf.text("Order ID: "+orderId.innerText,20,40);
  pdf.text("User: "+user.value,20,50);
  pdf.text("‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°: "+products.reduce((s,p)=>s+p.price,0)+" ‡∏ö‡∏≤‡∏ó",20,60);
  pdf.text("‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à",20,70);
  pdf.text("‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£",20,90);
  pdf.save("receipt-"+orderId.innerText+".pdf");
}
</script>

</body>
</html>
